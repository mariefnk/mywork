<!DOCTYPE html>

<!-- Also read chapter 9 from slides - Regular Expressions -->

<html>
<head>
    <title>My Works</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="font-awesome/css/font-awesome.css">
    <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>

<!--NAV BAR-->
<nav>

    <div class="employer-navbar navbar navbar-inverse navbar-fixed-left nav-collapsed">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <ul class="nav navbar-nav">
            <li class="icon-navbar-nav-text"><a href="home.html"><span class="nav-item-text">Home</span></a></li>
            <li onclick="$('.jobsSubItems').toggle();"><a href="#"><span class="nav-item-text">Jobs</span></a></li>
<!--
            <li class="navbar-subitems jobsSubItems navbar-subitems-subdescription"><a href="" class="nav-item-text">Manage</a>
            </li>
            <li class="navbar-subitems jobsSubItems navbar-subitems-subdescription"><a href="" class="nav-item-text">Active</a>
            </li>
            <li class="navbar-subitems jobsSubItems navbar-subitems-subdescription"><a href="" class="nav-item-text">History</a>
            </li>
-->
            <li><a href="#"><span class="nav-item-text">Messages</span></a></li>
<!--
            <li onclick="$('.workersSubItems').toggle();"><a href="#"><span class="nav-item-text">Workers</span></a>
            </li>
-->
<!--
            <li class="navbar-subitems workersSubItems navbar-subitems-subdescription"><a href="" class="nav-item-text">Pending</a>
            </li>
            <li class="navbar-subitems workersSubItems navbar-subitems-subdescription"><a href="" class="nav-item-text">Active</a>
            </li>
-->
            <li><a href="#"><span class="nav-item-text">Calendar</span></a></li>
            <li><a href="#"><span class="nav-item-text">Payment</span></a></li>
        </ul>
    </div>

    <div class="employer-navbar-icons navbar navbar-inverse navbar-fixed-left">
        <span id="hamburger" class="icon-bar" style="font-size:30px; cursor: pointer;"
              onclick="toggleNav()">&#9776;</span>
        <ul class="nav navbar-nav">
            <li class=" icon icon-navbar-nav"><a href="home.html"><i class="fa fa-home fa-2x" aria-hidden="true"></i></a></li>
            <li class ="icon" onclick="$('#jobsSubItems').toggle();"><a href="#"><i class="fa fa-suitcase fa-2x" aria-hidden="true"
                                                                     ></i></a></li>
<!--
            <li class="navbar-subitems jobsSubItems">&nbsp;</li>
            <li class="navbar-subitems jobsSubItems">&nbsp;</li>
            <li class="navbar-subitems jobsSubItems">&nbsp;</li>
-->
            <li class ="icon"><a href="#"><i class="fa fa-comments-o fa-2x" aria-hidden="true" onclick="toggleNav()"></i></a></li>
<!--
            <li class ="icon" onclick="$('#workersSubItems').toggle();"><a href="#"><i class="fa fa-users fa-2x" aria-hidden="true"
                                                                         onclick="toggleNav()"></i></a></li>
-->
            <li class="navbar-subitems workersSubItems">&nbsp;</li>
            <li class="navbar-subitems workersSubItems">&nbsp;</li>
            <li class ="icon"><a href="#"><i class="fa fa-calendar-o fa-2x" aria-hidden="true" onclick="toggleNav()"></i></a></li>
            <li class ="icon"><a href="#"><i class="fa fa-credit-card fa-2x" aria-hidden="true" onclick="toggleNav()"></i></a></li>

        </ul>
    </div>
    <div class="wrapper">
        <div class="search-bar">
            <div class="container" id="search-bar-container">
                <div class="row">
                    <div class="col-md-8 col-sm-12 col-xs-12">
                        <form id="search-form" role="form" method="#" action="#">
                            <div class="search">
                                <span class="fa fa-search"></span>
                                <input type="text" class="form-control search-job" placeholder="Search"
                                       onclick="openJobOfferList()">
                                <!--data-toggle="dropdown"-->


                            </div>
                        </form>


                    </div>

                    <div class="col-md-4 col-sm-12">

                        <ul class="nav navbar-nav navbar-right">
                            
                            
                            <li id="favorites" class="dropdown">
                                 <ul class="dropdown-menu" role="menu">
                                    <li><a href="#"><span class="fa fa-user submenu-profile"></span>My Profile</a></li>
                                    <li><a href="#"><span class="fa fa-cogs submenu-profile"></span>Settings</a></li>
                                    <div class="dropdown-divider"></div>
                                    <li><a href="#"><span class="fa fa-power-off submenu-profile"></span>Log Out</a>
                                    </li>
                                </ul>
                                <i class="fa fa-users fa-1x dropdown-toggle" aria-hidden="true" data-toggle="dropdown" aria-expanded="false"><div class="navbar-left-icons">Favorites</div>
                                </i>
                            </li>
                            
                            
                            <li id="notifications"  class="dropdown">
                                 <ul class="dropdown-menu" style="width:250px;" role="menu">
                                     <div class="row">
                                 <div class="col-md-8 notification-description" style="padding-right:0px; padding-left:0px;">
                                 <h6>Casino royal sent you a job offer!</h6>
                                        <div>Start: April 7, 2017 10:00 AM</div>
                                         <div>End: April 8, 2017 06:00 AM</div>
                                </div>
                                <div class="col-md-4 notification-date"style="padding-right:0px; padding-left:0px; font-size:12px;">Apr 3</div>
                                      
                                </div>
                                </ul>
                                <i class="fa fa-bell fa-1x dropdown-toggle" aria-hidden="true"  data-toggle="dropdown" aria-expanded="false"> <div class="navbar-left-icons">Notifications</div></i>
                               
                            </li>
                            <li class="dropdown">
                                <ul class="dropdown-menu" role="menu">
<!--
                                    <div class="profile-picture-dropdown">
                                        <img src="images/12080057_10206075733424857_1178354056710554146_o.jpg"
                                             class="img-responsive" alt="Employer Profile Picture">
                                        <a href="#"><span class="view-profile">View profile</span></a></div>
-->
<!--                                    <div class="dropdown-divider  profile-picture-divider"></div>-->
                                    <li><a href="#"><span class="fa fa-user submenu-profile"></span>My Profile</a></li>
                                    <li><a href="#"><span class="fa fa-cogs submenu-profile"></span>Settings</a></li>
                                    <div class="dropdown-divider"></div>
                                    <li><a href="#"><span class="fa fa-power-off submenu-profile"></span>Log Out</a>
                                    </li>
                                </ul>
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <div class="profile-userpic">
                                        <img src="images/12080057_10206075733424857_1178354056710554146_o.jpg"
                                             class="img-responsive" alt="Employer Profile Picture">
                                    </div>
                                    <div class="profile-usertitle-name">Hotel Platza</div>
                                </a>
                            </li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>
    </div>


</nav>

<!-- END NAV BAR-->

<!--SUB NAV BAR-->

<div class="wrapper">
    <div class="sub-nav-bar">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="sub-nav">
                        <div class="header-center">
                            <div class="tab-nav-div">
                                <ul class="tab-nav-bar tab-nav-bar-center">
                                    <li class="tab-nav">
                                        <a class="tab-nav-button is-selected" href="#">Job board</a>
                                    </li>
<!--
                                    <li class="tab-nav">
                                        <a class="tab-nav-button" href="#">Calendar</a>
                                    </li>
-->
<!--
                                    <li class="tab-nav">
                                        <a class="tab-nav-button" href="#">Active workers</a>
                                    </li>
-->
                                    <li class="tab-nav">
                                        <a class="tab-nav-button" href="#">Bills</a>
                                    </li>
                                    <li class="tab-nav">
                                        <a class="tab-nav-button" href="#">My Reviews</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--END SUB NAV BAR-->


<!--MAIN CONTENT-->
<div class="wrapper">
    <div class="container main-content-wrapper">
        <div class="row">
            <div class="col-md-12">
                <div class="main-content">
                    <div class="sub-content">
                        <div class="row">
                            <div class="profile-top-background"></div>
                            <div class="profile-container">
                                <img class="profile-picture">
                                <div class="profile-name"></div>
                                <div class="profile-degree"></div>
                                <div class="profile-position"></div>
                                <div class="profile-age" style="display: none;">
                                    <i class="fa fa-birthday-cake" style="color: red;"></i>
                                    <span id="age"></span>
                                </div>

                                <div class="profile-block">
                                    <div class="profile-reviews-comments">
                                      <span class="profile-block-value">3</span>
                                        <div class="rating-reviews-title">Feedbacks</div>
                                    </div>
                                    <div class="profile-reviews">
                                        <span class="profile-block-value">4.9</span>
                                        <span class="rating-visual">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star-half-full"></i>
                                        </span>
                                      
                                    </div>
                                    <div class="profile-missions">
                                        <span class="profile-block-value">7</span>
                                        <div class="mission-info">Missions</div>
                                    </div>
                                    <div class="profile-salary-expected"></div>
<!--
                                      <span class="salary-expected-amount"></span>
                                        <div class="salary-expected-title">Per hour</div>
-->
                                </div>

                                <div class="profile-whyHire">
                                    <div>Here is why you should hire <span id="name"></span></div>
                                    <div id="whyHire"></div>
                                </div>
                                <div class="profile-experience">
                                    <div>Experience</div>
                                </div>
                                <div class="profile-schedule">
                                    <div>Schedule</div>
                                </div>
                                <button class="btn btn-primary" onclick="openOfferPopup()">Send Request</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <div id="mask"></div>


<!--END MAIN CONTENT-->
<!--
<div id="mask"></div>
<div id="job-offer-popup" class="container">
    <div class="popup-close" onclick="$('#job-offer-popup').hide(); $('#mask').hide();"><i class="fa fa-close"></i></div>
    <div class="title"></div>
    <div class="rate"></div>
    <div class="container">
        <button id="jdBtn" href="#jd" class="btn btn-signup-form" data-toggle="collapse">
            Job Description
            <span class="fields-validation-check"><i class="fa fa-check-circle-o" aria-hidden="true"></i></span>
        </button>
        <div id="jd" class="my-section collapse in">
            <div class="signup-form">
                <label class="form-input-label"><i class="fa fa-fw fa-at" aria-hidden="true"></i><input
                        type="text" name="jobTitle" required placeholder="Job Title*"/></label>
                <label class="form-input-label">
                    <textarea required type="textarea" cols="60" rows="6"
                              name="jdDescription"
                              placeholder="Tell the worker what the position is about*"></textarea>
                </label>
            </div>
        </div>
        <button id="scheduleBtn" href="#schedule" class="btn btn-signup-form" data-toggle="collapse">
            Schedule
            <span class="fields-validation-check"><i class="fa fa-check-circle-o" aria-hidden="true"></i></span>
        </button>
        <div id="schedule" class="my-section collapse">
            <div>SELECT THE DATES AND TIMES FOR THIS MISSION</div>
            <br>
            <div class="signup-form" style="display: table; width: 100%;">
                <div class="calendar">
                    <div id="scheduler"></div>
                </div>
                <div class="dates-selection">&nbsp;</div>
            </div>
        </div>
    </div>
    <button id="scheduleNowBtn" disabled class="btn btn-primary" style="margin-bottom: 5px;">SCHEDULE NOW</button>
</div>
-->

<!-- jQuery first, then Bootstrap JS. -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"
        integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY"
        crossorigin="anonymous"></script>
<script src="http://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"
        integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB"
        crossorigin="anonymous"></script>
<!--
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"
        integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK"
        crossorigin="anonymous"></script>
-->
<script src="script.js"></script>

<script>
    $(document).ready(function() {
        var workers = sessionStorage.getItem('workers');
        var selectedWorkerId = sessionStorage.getItem('selectedWorkerId');
        var worker;
        if (workers) {
            workers = JSON.parse(workers);
            worker = workers[selectedWorkerId];
        } else {
            worker = {
                email: "jane.doe@yopmail.com",
                password: "welcome",
                firstName: "Jane",
                lastName: "Doe",
                address: "223-B Bakers Street",
                city: "London",
                zip: "06330",
                state: "England",
                phone: "9898298982",
                dob: "01-01-1990",
                gender: "F",
                profilePic: "images/12080057_10206075733424857_1178354056710554146_o.jpg",
                category: "Waitress",
                yoe: "More than 2 years",
                degree: "None",
                graduation: "Still attending",
                expectedSalary: 24,
                avgSalary: 14,
                whyHire: "Coz I'm the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best of the best. Period.",
                schedule: {
                    Monday: ["tod-a"],
                    Thursday: ["tod-n", "tod-e"]
                },
                ccNumber: "5523 0000 0000 0001",
                expDate: "01/19",
                cvv: "123",
                id: 0
            };
        }

        $('.profile-picture')[0].src = worker.profilePic;
        $('.profile-name').append(worker.firstName + ' ' + worker.lastName);
        if (worker.degree != '' && worker.degree != 'None') {
            var degreeEl = $('.profile-degree');
            degreeEl.append("Student at " + worker.degree);
            if (!isNaN(worker.graduation)) {
                degreeEl.append(", graduated in " + worker.graduation);
            }
        }
        $('.profile-position').append('Looking for ' + worker.category + ' position');
        if (worker.dob) {
            $('.profile-age').show();
            $('#age').append(getAge(worker.dob));
        }

        $('.profile-salary-expected').append('$' + worker.expectedSalary + " per hour");
        $('#name').append(worker.firstName + ' ' + worker.lastName);
        $('#whyHire').append(worker.whyHire);

        var expContent = '<div class="experience-item">';
        expContent += '<span>' + worker.category + '</span>';
        expContent += '<span>' + worker.yoe + '</span>';
        expContent += '</div>';

        $('.profile-experience').append(expContent);

        var availability = $('.profile-schedule');
        var days = Object.keys(worker.schedule);
        for (var i=0; i<days.length; i++) {
            var content = '<div class="day-item"><div class="day">' + days[i] + '</div>';
            content += '<div class="tod">';
            for (var j=0; j<worker.schedule[days[i]].length; j++) {
                switch (worker.schedule[days[i]][j]) {
                    case "tod-a":
                        content += 'All Day';
                        break;
                    case "tod-m":
                        content += 'Morning';
                        break;
                    case "tod-n":
                        content += 'Afternoon';
                        break;
                    case "tod-e":
                        content += 'Evening';
                        break;
                }
                if (j+1 < worker.schedule[days[i]].length) {
                    content += ', ';
                }
            }
            content += '</div></div>';
            availability.append(content);
        }

//        $('#job-offer-popup .title').html(worker.firstName + ' ' + worker.lastName);
//        $('#job-offer-popup .rate').html("$" + worker.expectedSalary + "/hour");
        var scheduler = $('#scheduler').datepicker({
            onSelect: function(dateText) {
                var holder = $('.dates-selection');
                var content = '<div class="job-timing">';
                content += '<div class="job-date">' + dateText + '</div>';
                content += 'From ';
                content += appendTimePicker('from');
                content += 'To ';
                content += appendTimePicker('to');
                content += '&nbsp;<i class="fa fa-remove" style="color: red;" onclick="removeJobTiming(this);"></i>';
                content += '</div>';

                holder.append(content);
                $('#scheduleBtn .fields-validation-check').show();
                updateScheduleNowButton();
            }
        });
        scheduler.show();
    });

//    function removeJobTiming(el) {
//        $(el).closest('.job-timing').remove();
//        if ($('.dates-selection .job-timing').length == 0) {
//            $('#scheduleBtn .fields-validation-check').hide();
//            updateScheduleNowButton();
//        }
//    }
//
//    function appendTimePicker(className) {
//        var content = '<select class="' + className + '">';
//        for(var i =0; i < 24; i++){
//            var hour = ((i + 11) % 12 + 1);
//            var a = i > 11 ? "pm" : "am";
//            content += '<option value="'+ hour + ':00 '+a+'" >'+ hour + ':00 '+a+'</option>';
//            content += '<option value="'+ hour + ':15 '+a+'" >'+ hour + ':15 '+a+'</option>';
//            content += '<option value="'+ hour + ':30 '+a+'" >'+ hour + ':30 '+a+'</option>';
//            content += '<option value="'+ hour + ':45 '+a+'" >'+ hour + ':45 '+a+'</option>';
//        }
//        content += '</select>';
//        return content;
//    }
//
//    function openOfferPopup() {
//        $('#mask').show();
//        $('#job-offer-popup').show();
//    }
//
//    $('input, textarea').on('change', function(e) {
//        e = e || window.event;
//        var target = e.target || e.srcElement;
//
//        var holder = $(target).closest('.my-section');
//        var emptyElements = holder.find('input[required], select[required], textarea').filter(function(idx,val) {
//            /*if (val.type == 'radio' || val.type == 'checkbox') {
//             return !val.checked;
//             } else {*/
//            // TODO: handle radiogroups and checkboxes
//            return $(val).val() == "";
//            // }
//        });
//        var checkmarkEl = $('#' + holder[0].id + 'Btn .fields-validation-check');
//        if (emptyElements.length == 0) {
//            checkmarkEl.show();
//        } else {
//            checkmarkEl.hide();
//        }
//        updateScheduleNowButton();
//    });
//
//    function updateScheduleNowButton() {
//        var allChecks = $('#job-offer-popup .fields-validation-check');
//        var allUnchecks = allChecks.filter(function(idx,val) {
//            return $(val).is(":hidden");
//        });
//        if (allUnchecks && allUnchecks.length == 0) {
//            // activate create an account button
//            $('#scheduleNowBtn').prop('disabled', '');
//        } else {
//            $('#scheduleNowBtn').prop('disabled', 'disabled');
//        }
//    }
</script>

</body>
</html>